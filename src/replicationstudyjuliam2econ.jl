module replicationstudyjuliam2econ

####################Julia Replication Study 2###################
#Importing some important packages
import Pkg; Pkg.add("StatsBase")
import Pkg; Pkg.add("DataFrames")
import Pkg; Pkg.add("Plots")
import Pkg; Pkg.add("StatFiles")
import Pkg; Pkg.add("CategoricalArrays")
import Pkg; Pkg.add("FixedEffectModels")
import Pkg; Pkg.add("RegressionTables")
import Pkg; Pkg.add("GLM")
import Pkg; Pkg.add("PrettyTables")
import Pkg; Pkg.add("DelimitedFiles")
import Pkg; Pkg.add("ReadStatTables")
import Pkg; Pkg.add("StatsModels")
import Pkg; Pkg.add("MLJ")
import Pkg; Pkg.add("Missings")

using ReadStatTables, DataFrames, GLM, Statistics
using CategoricalArrays 
using Missings
using FixedEffectModels
using RegressionTables

#Reading STATA .dta file for analaysis
tb = readstat("/Users/anirudhbharadwaj/Desktop/Econ/Sem 4/Julia/publicdata.dta")
tb.getapaper
tb.doperator1
# doperator_vars = filter(name -> startswith(name, "doperator"), names(tb))

df = DataFrame(tb)
df_getapaper = copy(df, copycols =true)
df_getapaper = dropmissing(df_getapaper, :getapaper)
df_getapaper.getapaper

df_getapaper[!,:getapaper] = convert.(Float64,df_getapaper[!,:getapaper])
df_getapaper[!,:post] = convert.(Float64,df_getapaper[!,:post])
df_getapaper[!,:times] = convert.(Float64,df_getapaper[!,:times])

typeof(df_getapaper.getapaper)
typeof(df_getapaper.post)
typeof(df_getapaper.times)
# Define global variables
covariates = [
    "MBfemale", "Mreportedage", "MBvoted2004", "MBvoted2002", "MBvoted2001",
    "MBconsumer", "MBgetsmag", "MBpreferrepub", "MBprefernoone", "Mwave2",
    "MZBfemale", "MZreportedage", "MZBvoted2004", "MZBvoted2002", "MZBvoted2001",
    "MZBconsumer", "MZBgetsmag", "MZBpreferrepub", "MZBprefernoone", "MZwave2"
]

global priorvoting = [
    :voted2004g, :voted2003g, :voted2002g, :voted2001g, :voted2000g
]

# Convert the response variable to Float64
# getapaper_float = convert(Vector{Float64} âˆ˜ skipmissing ,df.getapaper)
# Convert the predictor variables to Float64
# X = convert(Matrix{Float64}, select(df, [:post, :times, covariates...]))

formula = @formula(getapaper ~ post + times)
lm(formula, df_getapaper)

# Create binary indicator variables for 'doperator' dummy variables
# doperatorColumns = filter(col -> occursin(r"doperator", string(col)), names(df))
# dummyMatrix = hcat([onehot(df[:, col]) for col in doperatorColumns]...)

# Convert the dummy matrix to a DataFrame
# dummyMatrix_df = DataFrame(dummyMatrix)

# Concatenate the dummy matrix with the original dataframe
# df_encoded = hcat(df, dummyMatrix_df)

# Create a formula for the regression model
formula2 = @formula(getapaper ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2)

formula3 = @formula(term(:getapaper) ~ sum(term.(covariates)))

# Run the regression model
model = lm(formula3, df_getapaper)

# Print the summary of the regression results
println(summary(model))

# For Panel A of Table 2 of the paper:
formula1 = @formula(getapaper ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column1 = reg(df_getapaper, formula1)
# print(column1[0])
formula2 = @formula(getpost ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column2 = reg(df_getapaper, formula2)
formula3 = @formula(gettimes ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column3 = reg(df_getapaper, formula3)
formula4 = @formula(readfrqr ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column4 = reg(df_getapaper, formula4)
formula5 = @formula(readsome ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column5 = reg(df_getapaper, formula5)

reg_table_2A = regtable(column1,column2,column3,column4, column5; regressors = ["post", "times"], labels = Dict("post" => "Washington Post treatment", "times" => "Washington Times treatment", "getapaper" => "Receives a newspaper", "getpost" => "Receives the Post", "gettimes" => "Receives the Times", "readfrqr" => "Frequency reads a paper (0 = Never, 3 = Every day)","readsome" => "Reads at least several times/week","getpost" => "Receives the Post"), 
regression_statistics = [ :adjr2])
reg_table_2A

# For Panel B of Table 2 of the paper:
formula6 = @formula(getapaper ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column1 = reg(df_getapaper, formula6)
formula7 = @formula(getpost ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column2 = reg(df_getapaper, formula7)
formula8 = @formula(gettimes ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column3 = reg(df_getapaper, formula8)
formula9 = @formula(readfrqr ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column4 = reg(df_getapaper, formula9)
formula10 = @formula(readsome ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column5 = reg(df_getapaper, formula10)

reg_table_2B = regtable(column1,column2,column3,column4, column5; regressors = ["paper"], labels = Dict("paper" => "Received either Post or Times treatment", "getapaper" => "Receives a newspaper", "getpost" => "Receives the Post", "gettimes" => "Receives the Times", "readfrqr" => "Frequency reads a paper (0 = Never, 3 = Every day)","readsome" => "Reads at least several times/week","getpost" => "Receives the Post"), regression_statistics = [ :adjr2])
reg_table_2B


# For Panel A of Table 3 of the paper:
formula11 = @formula(factindex ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column1 = reg(df_getapaper, formula11)
formula12 = @formula(consindexpol ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column2 = reg(df_getapaper, formula12)
formula13 = @formula(consindexgen ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column3 = reg(df_getapaper, formula13)

reg_table_3A = regtable(column1,column2,column3; regressors = ["post", "times"], labels = Dict("post" => "Washington Post treatment", "times" => "Washington Times treatment", "factindex" => "Fact Accuracy Index (higher is more accurate)", "consindexpol" => "Specific Issue Index (higher is conservative)", "consindexgen" => "Broad Policy Index (higher is conservative)"), 
regression_statistics = [ :adjr2])
reg_table_3A

#For Panel B of Table 3 of the paper:
formula14 = @formula(factindex ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column1 = reg(df_getapaper, formula14)
formula15 = @formula(consindexpol ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column2 = reg(df_getapaper, formula15)
formula16 = @formula(consindexgen ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column3 = reg(df_getapaper, formula16)

reg_table_3B = regtable(column1,column2,column3; regressors = ["paper"], labels = Dict("paper"  => "Received either Post or Times treatment", "factindex" => "Fact Accuracy Index (higher is more accurate)", "consindexpol" => "Specific Issue Index (higher is conservative)", "consindexgen" => "Broad Policy Index (higher is conservative)"), 
regression_statistics = [ :adjr2])
reg_table_3B

#For Panel A of Table 4 of the paper:
formula17 = @formula(voted ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column1 = reg(df_getapaper, formula17)
formula18 = @formula(voted2005g ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + voted2004g + voted2003g + voted2002g + voted2001g + voted2000g + fe(cells))
column2 = reg(df_getapaper, formula18) 
formula19 = @formula(voted2006g ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + voted2004g + voted2003g + voted2002g + voted2001g + voted2000g + fe(cells))
column3 = reg(df_getapaper, formula19)
formula20 = @formula(voteddem ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column4 = reg(df_getapaper, formula20)
formula21 = @formula(voteddem_all ~ post + times + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column5 = reg(df_getapaper, formula21)

reg_table_4A = regtable(column1,column2,column3, column4, column5; regressors = ["post", "times"], labels = Dict("post" => "Washington Post treatment", "times" => "Washington Times treatment", "voted" => "Voted in 2005 election (Survey)", "voted2005g" => "Voted in 2005 election (Administrative records)", "voted2006g" => "Voted in 2006 election", "voteddem" => "Voted for Democrat (set to missing if did not vote)","readsome" => "Voted for Democrat (set to zero if did not vote)"), 
regression_statistics = [ :adjr2])
reg_table_4A

#For Panel B of Table 4 of the paper:
formula22 = @formula(voted ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column1 = reg(df_getapaper, formula22)
formula23 = @formula(voted2005g ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + voted2004g + voted2003g + voted2002g + voted2001g + voted2000g + fe(cells))
column2 = reg(df_getapaper, formula23) 
formula24 = @formula(voted2006g ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + voted2004g + voted2003g + voted2002g + voted2001g + voted2000g + fe(cells))
column3 = reg(df_getapaper, formula24)
formula25 = @formula(voteddem ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column4 = reg(df_getapaper, formula25)
formula26 = @formula(voteddem_all ~ paper + MBfemale + Mreportedage + MBvoted2004 + MBvoted2002 + MBvoted2001 + MBconsumer + MBgetsmag + MBpreferrepub + MBprefernoone + Mwave2 + MZBfemale + MZreportedage + MZBvoted2004 + MZBvoted2002 + MZBvoted2001 + MZBconsumer + MZBgetsmag + MZBpreferrepub + MZBprefernoone + MZwave2 + doperator1 + doperator2 + doperator3 + doperator4 + doperator5 + doperator6 + doperator7 + doperator8 + doperator9 + doperator10 + doperator11 + doperator12 + doperator13 + doperator14 + doperator15 + doperator16 + doperator17 + doperator18 + doperator19 + doperator20 + doperator21 + doperator22 + doperator23 + doperator24 + doperator25 + doperator26 + doperator27 + doperator28 + doperator29 + doperator30 + doperator31 + doperator32 + doperator33 + doperator34 + doperator35 + doperator36 + doperator37 + doperator38 + doperator39 + doperator40 + doperator41 + doperator42 + doperator43 + doperator44 + doperator45 + doperator46 + doperator47 + doperator48 + doperator49 + doperator50 + doperator51 + doperator52 + doperator53 + doperator54 + doperator55 + doperator56 + doperator57 + doperator58 + doperator59 + doperator60 + doperator61 + doperator62 + doperator63 + doperator64 + doperator65 + doperator66 + doperator67 + doperator68 + doperator69 + doperator70 + doperator71 + doperator72 + doperator73 + doperator74 + doperator75 + doperator76 + doperator77 + doperator78 + doperator79 + doperator80 + doperator81 + doperator82 + doperator83 + doperator84 + doperator85 + doperator86 + doperator87 + doperator88 + doperator89 + doperator90 + doperator91 + doperator92 + doperator93 + doperator94 + doperator95 + doperator96 + doperator97 + doperator98 + doperator99 + doperator100 + doperator101 + fe(cells))
column5 = reg(df_getapaper, formula26)

reg_table_4B = regtable(column1,column2,column3, column4, column5; regressors = ["paper"], labels = Dict("paper" => "Received either Post or Times treatment", "voted" => "Voted in 2005 election (Survey)", "voted2005g" => "Voted in 2005 election (Administrative records)", "voted2006g" => "Voted in 2006 election", "voteddem" => "Voted for Democrat (set to missing if did not vote)","readsome" => "Voted for Democrat (set to zero if did not vote)"), 
regression_statistics = [ :adjr2])
reg_table_4B

# Write your package code here.


end
